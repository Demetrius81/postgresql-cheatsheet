## üîπ –í–≤–µ–¥–µ–Ω–∏–µ: –∑–∞—á–µ–º –Ω—É–∂–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞:

* —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ **–∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö** (redundancy),
* –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—é **–∞–Ω–æ–º–∞–ª–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** (update anomalies),
* –ø–æ–≤—ã—à–µ–Ω–∏–µ **—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏** –¥–∞–Ω–Ω—ã—Ö,
* —É–ø—Ä–æ—â–µ–Ω–∏–µ **–ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è** —Å—Ö–µ–º—ã.

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:

> –†–∞–∑–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º —Ç–∞–±–ª–∏—Ü–∞–º —Ç–∞–∫, —á—Ç–æ–±—ã –∫–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ–ø–∏—Å—ã–≤–∞–ª–∞ **–æ–¥–∏–Ω —Ç–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏**, –∞ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –≤—ã—Ä–∞–∂–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ **–∫–ª—é—á–∏**.

**–ü—Ä–∏–º–µ—Ä –º–æ—Ç–∏–≤–∞—Ü–∏–∏:**
–ü—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤:

| id | customer_name | customer_email                        | product_name | product_price |
| -- | ------------- | ------------------------------------- | ------------ | ------------- |
| 1  | Ivan          | [ivan@mail.com](mailto:ivan@mail.com) | iPhone       | 1000          |
| 2  | Ivan          | [ivan@mail.com](mailto:ivan@mail.com) | Case         | 50            |

–ó–¥–µ—Å—å –¥–∞–Ω–Ω—ã–µ –æ –∫–ª–∏–µ–Ω—Ç–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è. –≠—Ç–æ –≤–µ–¥—ë—Ç –∫ –ø—Ä–æ–±–ª–µ–º–∞–º:

* –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ e-mail –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ (–∞–Ω–æ–º–∞–ª–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è).
* –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –±–µ–∑ –∑–∞–∫–∞–∑–∞ ‚Äî –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å (–∞–Ω–æ–º–∞–ª–∏—è –≤—Å—Ç–∞–≤–∫–∏).
* –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî —Ç–µ—Ä—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª–∏–µ–Ω—Ç–µ (–∞–Ω–æ–º–∞–ª–∏—è —É–¥–∞–ª–µ–Ω–∏—è).

–†–µ—à–µ–Ω–∏–µ: —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ ‚Äî **Customer** –∏ **Order**.

---

## üî∏ –ü–µ—Ä–≤–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (1NF)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:

–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **1–ù–§**, –µ—Å–ª–∏:

* –≤—Å–µ –ø–æ–ª—è –∞—Ç–æ–º–∞—Ä–Ω—ã (–Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π),
* –Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –≥—Ä—É–ø–ø –∏–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü.

**–ü—Ä–∏–º–µ—Ä:**

üö´ *–ù–∞—Ä—É—à–µ–Ω–∏–µ 1–ù–§*:

| id | name | phones          |
| -- | ---- | --------------- |
| 1  | Ivan | +375111,+375222 |

‚úÖ *–ü—Ä–∞–≤–∏–ª—å–Ω–æ*:

| id | name | phone   |
| -- | ---- | ------- |
| 1  | Ivan | +375111 |
| 1  | Ivan | +375222 |

**–ü—Ä–æ–±–ª–µ–º–∞**: –±–µ–∑ 1–ù–§ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `phone`).

---

## üî∏ –í—Ç–æ—Ä–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (2NF)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:

–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–æ **2–ù–§**, –µ—Å–ª–∏:

* –æ–Ω–∞ –≤ **1–ù–§**,
* –∏ **–∫–∞–∂–¥—ã–π –Ω–µ–∫–ª—é—á–µ–≤–æ–π –∞—Ç—Ä–∏–±—É—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞**, –∞ –Ω–µ –æ—Ç –µ–≥–æ —á–∞—Å—Ç–∏.

–ü—Ä–∏–º–µ–Ω–∏–º–æ —Ç–æ–ª—å–∫–æ –∫ —Ç–∞–±–ª–∏—Ü–∞–º —Å **—Å–æ—Å—Ç–∞–≤–Ω—ã–º –∫–ª—é—á–æ–º**.

**–ü—Ä–∏–º–µ—Ä:**

üö´ *–ù–∞—Ä—É—à–µ–Ω–∏–µ 2–ù–§*:

| student_id | course_id | student_name | grade |
| ---------- | --------- | ------------ | ----- |
| 1          | 101       | Ivan         | A     |

–ó–¥–µ—Å—å `student_name` –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç `student_id`, –∞ –Ω–µ –æ—Ç –≤—Å–µ–≥–æ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ –∫–ª—é—á–∞ `(student_id, course_id)`.

‚úÖ *–†–µ—à–µ–Ω–∏–µ*:

* –í—ã–¥–µ–ª–∏—Ç—å `Students(student_id, student_name)`
* –û—Å—Ç–∞–≤–∏—Ç—å `Enrollments(student_id, course_id, grade)`

---

## üî∏ –¢—Ä–µ—Ç—å—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (3NF)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:

–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **3–ù–§**, –µ—Å–ª–∏:

* –æ–Ω–∞ –≤ **2–ù–§**,
* –∏ **–Ω–µ—Ç —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –Ω–µ–∫–ª—é—á–µ–≤–æ–π —Å—Ç–æ–ª–±–µ—Ü –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ –Ω–µ–∫–ª—é—á–µ–≤–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.

**–ü—Ä–∏–º–µ—Ä:**

üö´ *–ù–∞—Ä—É—à–µ–Ω–∏–µ 3–ù–§*:

| employee_id | department_id | department_name |
| ----------- | ------------- | --------------- |
| 1           | 10            | IT              |

`department_name` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `department_id`, –Ω–µ –æ—Ç `employee_id`.

‚úÖ *–†–µ—à–µ–Ω–∏–µ*:

* `Employees(employee_id, department_id)`
* `Departments(department_id, department_name)`

---

## üî∏ –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –ë–æ–π—Å–∞-–ö–æ–¥–¥–∞ (BCNF)

–≠—Ç–æ **—É—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è 3–ù–§**.
–¢–∞–±–ª–∏—Ü–∞ –≤ BCNF, –µ—Å–ª–∏:

> –ö–∞–∂–¥—ã–π –¥–µ—Ç–µ—Ä–º–∏–Ω–∞–Ω—Ç (–∞—Ç—Ä–∏–±—É—Ç, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –¥—Ä—É–≥–∏–µ) ‚Äî —ç—Ç–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–Ω—ã–π –∫–ª—é—á.

**–ü—Ä–∏–º–µ—Ä:**
üö´ –ù–∞—Ä—É—à–µ–Ω–∏–µ:

| professor | course   | room |
| --------- | -------- | ---- |
| Smith     | DB       | 101  |
| Smith     | Networks | 102  |

–ï—Å–ª–∏ `course` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `room`, –Ω–æ `professor` –Ω–µ —É–Ω–∏–∫–∞–ª–µ–Ω, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–∞—Ä—É—à–µ–Ω–∏–µ BCNF.

‚úÖ –†–µ—à–µ–Ω–∏–µ:

* `Courses(course, room)`
* `Professors(professor, course)`

---

## üî∏ –ß–µ—Ç–≤—ë—Ä—Ç–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (4NF)

–§–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ **–º–Ω–æ–≥–æ–∑–Ω–∞—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö**.

–¢–∞–±–ª–∏—Ü–∞ –≤ **4–ù–§**, –µ—Å–ª–∏:

* –æ–Ω–∞ –≤ BCNF,
* –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–Ω–æ–≥–æ–∑–Ω–∞—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**.

**–ü—Ä–∏–º–µ—Ä:**

üö´ –ù–∞—Ä—É—à–µ–Ω–∏–µ:

| student | language | hobby |
| ------- | -------- | ----- |
| Ivan    | English  | Chess |
| Ivan    | English  | Music |
| Ivan    | German   | Chess |
| Ivan    | German   | Music |

–Ø–∑—ã–∫–∏ –∏ —Ö–æ–±–±–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ ‚Äî –Ω–∞–¥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å:

‚úÖ

* `StudentLanguages(student, language)`
* `StudentHobbies(student, hobby)`

---

## üî∏ –ü—è—Ç–∞—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (5NF)

–¢–∞–±–ª–∏—Ü–∞ –≤ **5–ù–§**, –µ—Å–ª–∏:

* –æ–Ω–∞ –≤ 4–ù–§,
* –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç **—Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–æ—Ç–µ—Ä—å.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, —á–∞—â–µ –≤ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö.

---

## üî∏ –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –±–∞–ª–∞–Ω—Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ò–∑–±—ã—Ç–æ—á–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –º–Ω–æ–≥–æ JOIN‚Äô–æ–≤**
   –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ **–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 3–ù–§ –∏–ª–∏ BCNF** —á–∞—Å—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞.

2. **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

   * –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–ª—è **–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö** –∏–ª–∏ **–≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö** —Å–∏—Å—Ç–µ–º,
   * —á–∞—Å—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ –≤–∏–¥–µ **–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π**, –∫—ç—à–µ–π –∏–ª–∏ `CQRS`.

3. **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –∏–Ω–¥–µ–∫—Å—ã:**

   * FK –∏ JOIN‚Äô—ã —Ç—Ä–µ–±—É—é—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∫–ª—é—á–µ–π,
   * –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ **deadlocks** –∏–ª–∏ **—Å–Ω–∏–∂–µ–Ω–∏—é —Å–∫–æ—Ä–æ—Å—Ç–∏ VACUUM**.

4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π:**
   –ß–µ–º –±–æ–ª—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Ç–µ–º –¥–æ—Ä–æ–∂–µ schema changes. –ò–Ω–æ–≥–¥–∞ –ª—É—á—à–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–π –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ñ–æ—Ä–º–æ–π —Ä–∞–¥–∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

---

## üîπ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ PostgreSQL ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞, –∞ **–æ—Å–Ω–æ–≤–∞ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö**.
–ù–æ –∑—Ä–µ–ª—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã –≤—Å–µ–≥–¥–∞ –±–∞–ª–∞–Ω—Å–∏—Ä—É—é—Ç –º–µ–∂–¥—É —Ç–µ–æ—Ä–∏–µ–π –∏ –ø—Ä–∞–∫—Ç–∏–∫–æ–π:

* –ù–∞ OLTP-—Å–∏—Å—Ç–µ–º–∞—Ö (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö) –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–æ **3–ù–§/BCNF**.
* –ù–∞ OLAP-—Å–∏—Å—Ç–µ–º–∞—Ö (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞) —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ö–µ–º—ã** —Ä–∞–¥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
* PostgreSQL –±–ª–∞–≥–æ–¥–∞—Ä—è –º–æ—â–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ **FOREIGN KEY, CHECK –∏ UNIQUE constraints** –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –≤—Å—ë –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ latency.

---

# –†–∞–∑–±–µ—Ä—ë–º **–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏** —à–∞–≥ –∑–∞ —à–∞–≥–æ–º ‚Äî –æ—Ç ¬´–≥—Ä—è–∑–Ω–æ–π¬ª —Ç–∞–±–ª–∏—Ü—ã –¥–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä—ã 3–ù–§** –≤ PostgreSQL, —Å SQL-–∫–æ–¥–æ–º, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞.

---

## üîπ –®–∞–≥ 1. –ò—Å—Ö–æ–¥–Ω–∞—è (–Ω–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è) —Ç–∞–±–ª–∏—Ü–∞

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤:

```sql
CREATE TABLE orders_raw (
    id SERIAL PRIMARY KEY,
    customer_name TEXT,
    customer_email TEXT,
    product_name TEXT,
    product_price NUMERIC(10,2),
    quantity INT,
    order_date DATE
);
```

üß© –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:

| id | customer_name | customer_email                          | product_name | product_price | quantity | order_date |
| -- | ------------- | --------------------------------------- | ------------ | ------------- | -------- | ---------- |
| 1  | Ivan Petrov   | [ivan@mail.com](mailto:ivan@mail.com)   | iPhone 13    | 999.99        | 1        | 2025-10-01 |
| 2  | Ivan Petrov   | [ivan@mail.com](mailto:ivan@mail.com)   | Case         | 29.99         | 2        | 2025-10-01 |
| 3  | Anna Smirnova | [anna@gmail.com](mailto:anna@gmail.com) | MacBook Air  | 1299.99       | 1        | 2025-10-02 |

üß† –ü—Ä–æ–±–ª–µ–º—ã:

* –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–ª–∏–µ–Ω—Ç–µ.
* –¶–µ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ.
* –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ e-mail –∏–ª–∏ —Ü–µ–Ω—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π.
* –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏ –≤—Å—Ç–∞–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è.

---

## üî∏ –®–∞–≥ 2. –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ 1–ù–§ (–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å)

–£ –Ω–∞—Å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–∂–µ –∞—Ç–æ–º–∞—Ä–Ω—ã, –Ω–æ **1–ù–§ —Ç—Ä–µ–±—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π** –∏ **–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–µ–π**.
–≠—Ç–æ —É–∂–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–æ —á–µ—Ä–µ–∑ `id SERIAL PRIMARY KEY`.

‚úÖ –¢–∞–±–ª–∏—Ü–∞ –≤ **1–ù–§**.

---

## üî∏ –®–∞–≥ 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π ‚Üí 2–ù–§

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–¥–µ–ª–∏–º —Ç–∞–±–ª–∏—Ü—É –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å **—á–∞—Å—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**.

üìò –í—ã–¥–µ–ª–∏–º:

* `customers` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö,
* `products` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–æ–≤,
* `orders` ‚Äî —Å–∞–º–∏ –∑–∞–∫–∞–∑—ã,
* `order_items` ‚Äî —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞.

---

### –¢–∞–±–ª–∏—Ü–∞ `customers`

```sql
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL
);
```

### –¢–∞–±–ª–∏—Ü–∞ `products`

```sql
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    price NUMERIC(10,2) NOT NULL
);
```

### –¢–∞–±–ª–∏—Ü–∞ `orders`

```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
    order_date DATE NOT NULL
);
```

### –¢–∞–±–ª–∏—Ü–∞ `order_items`

```sql
CREATE TABLE order_items (
    order_id INT NOT NULL REFERENCES orders(id) ON DELETE CASCADE,
    product_id INT NOT NULL REFERENCES products(id),
    quantity INT NOT NULL,
    PRIMARY KEY (order_id, product_id)
);
```

üìà –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥–∞—è —Ç–∞–±–ª–∏—Ü–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç **–æ–¥–∏–Ω —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö**, –∏ –Ω–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî –º—ã –≤ **2–ù–§**.

---

## üî∏ –®–∞–≥ 4. –£–±–∏—Ä–∞–µ–º —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Üí 3–ù–§

–ü—Ä–æ–≤–µ—Ä–∏–º:

* `customer.email` –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `order` ‚Äî ‚úÖ
* `product.price` –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `order_items` ‚Äî ‚úÖ
* –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–µ–∫–ª—é—á–µ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ ‚Äî ‚úÖ

–ó–Ω–∞—á–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ **3–ù–§**.

---

## üî∏ –®–∞–≥ 5. –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö

```sql
INSERT INTO customers (name, email)
VALUES ('Ivan Petrov', 'ivan@mail.com'),
       ('Anna Smirnova', 'anna@gmail.com');

INSERT INTO products (name, price)
VALUES ('iPhone 13', 999.99),
       ('Case', 29.99),
       ('MacBook Air', 1299.99);

INSERT INTO orders (customer_id, order_date)
VALUES (1, '2025-10-01'),
       (2, '2025-10-02');

INSERT INTO order_items (order_id, product_id, quantity)
VALUES (1, 1, 1),
       (1, 2, 2),
       (2, 3, 1);
```

---

## üî∏ –®–∞–≥ 6. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (JOIN)

```sql
SELECT
    o.id AS order_id,
    c.name AS customer_name,
    c.email,
    p.name AS product_name,
    p.price,
    oi.quantity,
    o.order_date
FROM orders o
JOIN customers c ON c.id = o.customer_id
JOIN order_items oi ON oi.order_id = o.id
JOIN products p ON p.id = oi.product_id
ORDER BY o.id;
```

‚úÖ –ü–æ–ª—É—á–∏–º —Ç–æ—Ç –∂–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã, –Ω–æ:

* –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è,
* —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π,
* —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.

---

## üîπ –®–∞–≥ 7. –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–Ω-–ø—Ä–∞–∫—Ç–∏–∫–∞

1. **JOIN-—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Ä–æ–≥–∏–º–∏**
   –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–∞–±–ª–∏—Ü (10+) —Å—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π —Ä–∞—Å—Ç—ë—Ç.
   –†–µ—à–µ–Ω–∏—è:

   * –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ FK (`CREATE INDEX ON order_items(order_id)`),
   * –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ view –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤.

2. **–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫—ç—à–∞/–∞–Ω–∞–ª–∏—Ç–∏–∫–∏**
   –í —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —á–∞—Å—Ç–æ —Å–æ–∑–¥–∞—é—Ç—Å—è *–ø—Ä–µ–¥–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã*, –Ω–∞–ø—Ä–∏–º–µ—Ä:

   ```sql
   CREATE MATERIALIZED VIEW order_summary AS
   SELECT o.id, c.name, SUM(p.price * oi.quantity) AS total
   FROM orders o
   JOIN order_items oi ON oi.order_id = o.id
   JOIN products p ON p.id = oi.product_id
   JOIN customers c ON c.id = o.customer_id
   GROUP BY o.id, c.name;
   ```

3. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º—ã–µ –∫–ª—é—á–∏**
   –° –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º FK –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–µ–≥–∫–æ –Ω–∞—Ä—É—à–∏—Ç—å —Å–≤—è–∑–∏.
   –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

   * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **ON DELETE CASCADE** –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ,
   * –î–µ–ª–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ **—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö**,
   * –ü—Ä–æ–≤–µ—Ä—è—Ç—å `EXPLAIN ANALYZE` –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö JOIN.

4. **–¢–∏–ø–∏—á–Ω—ã–µ –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

   * –•—Ä–∞–Ω–µ–Ω–∏–µ JSONB –≤–º–µ—Å—Ç–æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–∏–±–∫–æ—Å—Ç—å —Å—Ö–µ–º—ã),
   * –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω –∏–ª–∏ email –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö,
   * –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –ø–æ FK.

---

## üîπ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú—ã –ø—Ä–æ—à–ª–∏ –ø—É—Ç—å:

> –æ—Ç –æ–¥–Ω–æ–π –Ω–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã ‚Üí –¥–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –≤ **3–ù–§**.

–ì–ª–∞–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏:

* –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö,
* —É–º–µ–Ω—å—à–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è,
* –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ FK,
* –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–π.

–ê –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∑—Ä–µ–ª—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç –ø–æ–¥—Ö–æ–¥—ã:

> **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è core-–¥–∞–Ω–Ω—ã—Ö** + **–¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∫–µ—à–µ–π**.

---
